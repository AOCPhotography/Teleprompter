<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Teleprompter</title>
  <style>
    body {
      background-color: black;
      color: white;
      margin: 0;
      font-size: 48px;
      font-family: Arial, sans-serif;
      overflow: hidden;
    }
    #controls {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.85);
      padding: 5px;
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #script {
      padding: 140px 80px 60px 80px;
      max-width: 1000px;
      margin: auto;
      white-space: pre-wrap;
      outline: none;
      transform: scaleX(-1);
    }
    .hidden {
      display: none !important;
    }
    button, input[type=range] {
      font-size: 10px;
      padding: 4px 6px;
      background-color: #333;
      color: white;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      height: 24px;
    }
    button:hover {
      background-color: #555;
    }
    input[type=range] {
      width: 60px;
    }
  </style>
</head>
<body>
  <div id="controls">
    <button onclick="togglePlay()">‚ñ∂Ô∏è / ‚è∏Ô∏è</button>
    <button onclick="toggleFullscreen()">‚õ∂ Fullscreen</button>
    <button onclick="toggleMirror()">ü™û Toggle Mirror</button>
    <button onclick="clearScript()">üßπ Clear</button>
    <button onclick="saveScript()">üíæ Save</button>
    <input type="file" accept=".txt" onchange="loadFile(event)" />
    <label>Speed <input type="range" min="0.5" max="10" step="0.5" value="2" id="speedSlider"></label>
    <label>Font <input type="range" min="12" max="100" step="2" value="48" id="fontSlider"></label>
  </div>

  <div id="script" contenteditable="true">Paste your teleprompter script here...</div>

  <script>
    const script = document.getElementById("script");
    const controls = document.getElementById("controls");
    const speedSlider = document.getElementById("speedSlider");
    const fontSlider = document.getElementById("fontSlider");
    let isPlaying = false;
    let scrollSpeed = parseFloat(speedSlider.value);
    let fontSize = parseInt(fontSlider.value);
    let scrollInterval;

    function togglePlay() {
      isPlaying = !isPlaying;
      if (isPlaying) {
        scrollInterval = setInterval(() => {
          window.scrollBy(0, scrollSpeed);
        }, 16);
      } else {
        clearInterval(scrollInterval);
      }
    }

    function toggleFullscreen() {
      const isFull = !!document.fullscreenElement;
      if (!isFull) {
        document.documentElement.requestFullscreen().then(() => {
          controls.classList.add("hidden");
        });
      } else {
        document.exitFullscreen().then(() => {
          controls.classList.remove("hidden");
        });
      }
    }

    function toggleMirror() {
      script.style.transform = script.style.transform === "scaleX(-1)" ? "scaleX(1)" : "scaleX(-1)";
    }

    function clearScript() {
      if (confirm("Are you sure you want to clear the script?")) {
        script.innerText = "";
        localStorage.removeItem("teleprompterScript");
      }
    }

    function saveScript() {
      const blob = new Blob([script.innerText], { type: 'text/plain' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'teleprompter-script.txt';
      a.click();
    }

    function loadFile(event) {
      const reader = new FileReader();
      reader.onload = function () {
        script.innerText = reader.result;
        localStorage.setItem("teleprompterScript", reader.result);
      };
      reader.readAsText(event.target.files[0]);
    }

    // Keyboard shortcuts
    document.addEventListener("keydown", (e) => {
      if (e.ctrlKey && e.shiftKey && e.key === "1") {
        scrollSpeed = Math.max(0.5, scrollSpeed - 0.5);
        speedSlider.value = scrollSpeed;
      } else if (e.ctrlKey && e.shiftKey && e.key === "2") {
        scrollSpeed = Math.min(10, scrollSpeed + 0.5);
        speedSlider.value = scrollSpeed;
      } else if (e.ctrlKey && e.shiftKey && e.key === "4") {
        fontSize = Math.max(12, fontSize - 4);
        fontSlider.value = fontSize;
        script.style.fontSize = fontSize + "px";
      } else if (e.ctrlKey && e.shiftKey && e.key === "5") {
        fontSize = Math.min(100, fontSize + 4);
        fontSlider.value = fontSize;
        script.style.fontSize = fontSize + "px";
      } else if (e.key === "ArrowDown") {
        window.scrollBy(0, fontSize);
      } else if (e.key === "ArrowUp") {
        window.scrollBy(0, -fontSize);
      } else if (e.key === " ") {
        e.preventDefault();
        togglePlay();
      } else if (e.key.toLowerCase() === "f") {
        toggleFullscreen();
      }
    });

    // Sync sliders
    speedSlider.addEventListener("input", (e) => {
      scrollSpeed = parseFloat(e.target.value);
    });

    fontSlider.addEventListener("input", (e) => {
      fontSize = parseInt(e.target.value);
      script.style.fontSize = fontSize + "px";
    });

    // Load script from localStorage
    window.addEventListener("load", () => {
      const saved = localStorage.getItem("teleprompterScript");
      if (saved) script.innerText = saved;
    });

    // Save on change
    script.addEventListener("input", () => {
      localStorage.setItem("teleprompterScript", script.innerText);
    });
  </script>
</body>
</html>
